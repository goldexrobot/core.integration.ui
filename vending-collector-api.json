{"components":{"requestBodies":{"DispenserManageSlotRequest":{"content":{"application/json":{"schema":{"properties":{"slot":{"$ref":"#/components/schemas/DispenserSlot"}},"required":["slot"],"type":"object"}}},"description":"Params"},"EmptyRequest":{"content":{"application/json":{"schema":{"type":"object","x-go-type":"struct{}"}}},"description":"Empty params"}},"responses":{"EmptyResult":{"content":{"application/json":{"schema":{"type":"object","x-go-type":"struct{}"}}},"description":"Empty result"}},"schemas":{"CameraPhoto":{"description":"Contains Base-64 encoded bytes of JPEG","type":"string"},"DispenserSlot":{"description":"Dispenser slot number","example":1,"minimum":1,"type":"integer","x-oapi-codegen-extra-tags":{"validate":"required,gte=1"}},"DispenserSlotExtendedState":{"description":"Dispenser slot state (extended)","properties":{"enabled":{"example":true,"type":"boolean"},"installed":{"example":true,"type":"boolean"},"slot":{"$ref":"#/components/schemas/DispenserSlot"}},"required":["slot","enabled","installed"],"type":"object"},"DispenserSlotsExtendedResult":{"properties":{"state":{"items":{"$ref":"#/components/schemas/DispenserSlotExtendedState"},"type":"array"}},"required":["state"],"type":"object"},"ErrorResult":{"description":"Error","properties":{"code":{"description":"Error code","example":-1,"type":"integer"},"message":{"description":"Error description","example":"Some error description","type":"string"}},"required":["code","message"],"type":"object"},"HardwareListResult":{"additionalProperties":{"type":"boolean"},"description":"Available hardware and its health","example":{"my-pos":true},"type":"object","x-go-type":"map[string]bool"},"HardwareRequest":{"properties":{"method":{"description":"Method name","example":"my-method","type":"string","x-oapi-codegen-extra-tags":{"validate":"required"}},"name":{"description":"Named hardware","example":"my-pos","type":"string","x-oapi-codegen-extra-tags":{"validate":"required"}},"params":{"description":"Method params","example":{"foo":"bar"},"type":"object","x-go-type":"json.RawMessage"}},"required":["name","method","params"],"type":"object"},"HardwareResult":{"properties":{"result":{"description":"Hardware method result","example":{"foo":"bar"},"type":"object","x-go-type":"json.RawMessage"}},"required":["result"],"type":"object"},"ServiceArgs":{"description":"User defined args","example":"{\"foo\":\"bar\"}","type":"string"},"StatusResult":{"properties":{"bot_id":{"example":42,"format":"uint64","type":"integer"},"online":{"description":"Online status","example":true,"type":"boolean"},"power":{"description":"Power line status","example":true,"type":"boolean"},"project_id":{"example":1,"format":"uint64","type":"integer"},"serial":{"description":"Machine serial number","example":"CV-001","type":"string"}},"required":["project_id","bot_id","serial","online","power"],"type":"object"}}},"info":{"description":"This document describes Goldex Robot [JSON-RPC 2.0](https://www.jsonrpc.org/specification) API in terms of HTTP requests, so:\n* method names should be read without a slash, i.e. `POST /foo.bar` is `foo.bar` method;\n* request bodies are treated as [request object params](https://www.jsonrpc.org/specification#request_object);\n* default response corresponds to the [response object result](https://www.jsonrpc.org/specification#response_object);\n* numeric response code represents [error object code](https://www.jsonrpc.org/specification#error_object);\n\nIn addition to standard [JSON-RPC error codes](https://www.jsonrpc.org/specification#error_object), each method defines local 5xx codes that should be handled.","title":"Vending (collector UI API)","version":"1.1.2"},"openapi":"3.0.0","paths":{"/alarm.stop":{"post":{"operationId":"alarmStop","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Shut down alarm horn","tags":["hardware"]}},"/dispenser.disable":{"post":{"operationId":"dispenserDisable","requestBody":{"$ref":"#/components/requestBodies/DispenserManageSlotRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Disable a slot","tags":["dispenser"]}},"/dispenser.enable":{"post":{"operationId":"dispenserEnable","requestBody":{"$ref":"#/components/requestBodies/DispenserManageSlotRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Enable a slot","tags":["dispenser"]}},"/dispenser.slots":{"post":{"operationId":"dispenserSlotsExtended","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DispenserSlotsExtendedResult"}}},"description":"Result"}},"summary":"Get dispenser slots state (extended)","tags":["dispenser"]}},"/door.open":{"post":{"operationId":"doorOpen","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Release electro-mechanical door lock","tags":["hardware"]}},"/hardware.call":{"post":{"operationId":"optHardwareCall","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HardwareRequest"}}},"description":"Params"},"responses":{"504":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"Hardware is unavailable. Try again"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HardwareResult"}}},"description":"Result"}},"summary":"Call optional hardware method","tags":["business"]}},"/hardware.list":{"post":{"operationId":"optHardwareList","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HardwareListResult"}}},"description":"Result"}},"summary":"Get available optional hardware","tags":["business"]}},"/service.args":{"post":{"description":"In order to show the UI a business have to send related request to the machine.\n\nThe request can contain a user defined data (string), this method will return it.","operationId":"serviceArgs","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceArgs"}}},"description":"Result"}},"summary":"UI arguments","tags":["service"]}},"/service.exit":{"post":{"description":"Close the UI and switch the machine to the operational mode (show customer UI)","operationId":"serviceExit","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Exit the UI","tags":["service"]}},"/service.frontal_photo":{"post":{"description":"Takes a photo from a frontal camera and returns Base64-encoded JPEG bytes","operationId":"serviceFrontalPhoto","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"504":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"Camera is unavailable. Try again"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraPhoto"}}},"description":"Result"}},"summary":"Frontal camera photo","tags":["service"]}},"/service.kill":{"post":{"description":"Ð¡all this method in case of emergency to switch the machine to the out of service mode.\n\nThe machine will display a service page and the UI will be unloaded.","operationId":"serviceKill","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Out of service","tags":["service"]}},"/service.status":{"post":{"description":"Reports current online status and machine features","operationId":"serviceStatus","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResult"}}},"description":"Result"}},"summary":"Machine status","tags":["service"]}}},"tags":[{"name":"service"},{"name":"hardware"},{"name":"dispenser"},{"name":"business"}]}