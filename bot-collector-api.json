{"components":{"requestBodies":{"AllocateCellRequest":{"content":{"application/json":{"schema":{"properties":{"cell":{"$ref":"#/components/schemas/StorageCell"},"user_tag":{"$ref":"#/components/schemas/StorageTag"}},"required":["cell","user_tag"],"type":"object"}}},"description":"Params"},"CellGridLoadRequest":{"content":{"application/json":{"schema":{"properties":{"user_tag":{"$ref":"#/components/schemas/StorageTag"}},"required":["user_tag"],"type":"object"}}},"description":"Params"},"DispenserManageSlotRequest":{"content":{"application/json":{"schema":{"properties":{"slot":{"$ref":"#/components/schemas/DispenserSlot"}},"required":["slot"],"type":"object"}}},"description":"Params"},"EmptyRequest":{"content":{"application/json":{"schema":{"type":"object","x-go-type":"struct{}"}}},"description":"Empty params"},"ManageCellRequest":{"content":{"application/json":{"schema":{"properties":{"cell":{"$ref":"#/components/schemas/StorageCell"}},"required":["cell"],"type":"object"}}},"description":"Params"}},"responses":{"EmptyResult":{"content":{"application/json":{"schema":{"type":"object","x-go-type":"struct{}"}}},"description":"Empty result"}},"schemas":{"CameraPhoto":{"description":"Contains Base-64 encoded bytes of JPEG","type":"string"},"CellGridData":{"description":"Describes a cell-grided storage. Has 90 slots","properties":{"allocated":{"description":"Allocated storage slot addresses and optional tags","items":{"$ref":"#/components/schemas/StorageAllocatedCell"},"type":"array"},"disabled":{"description":"Disabled slots","items":{"$ref":"#/components/schemas/StorageCell"},"type":"array"},"free":{"description":"Number of free slots","example":42,"type":"integer"},"scheme":{"description":"Represents slots scheme","items":{"$ref":"#/components/schemas/CellGridRow"},"type":"array"},"type":{"$ref":"#/components/schemas/StorageType"}},"required":["type","scheme","allocated","free","disabled"],"type":"object"},"CellGridLoadPrepareResult":{"properties":{"cell":{"$ref":"#/components/schemas/StorageCell"}},"required":["cell"],"type":"object"},"CellGridRow":{"properties":{"cells":{"items":{"$ref":"#/components/schemas/StorageCell"},"type":"array"},"row_number":{"type":"integer"}},"required":["row_number","cells"],"type":"object"},"DispenserData":{"description":"Describes a dispenser storage","properties":{"slots":{"description":"Slots state","items":{"$ref":"#/components/schemas/DispenserSlotState"},"type":"array"},"type":{"$ref":"#/components/schemas/StorageType"}},"required":["type","slots"],"type":"object"},"DispenserSlot":{"description":"Dispenser slot number","example":1,"minimum":1,"type":"integer","x-oapi-codegen-extra-tags":{"validate":"required,gte=1"}},"DispenserSlotState":{"description":"Dispenser slot state","properties":{"enabled":{"example":true,"type":"boolean"},"slot":{"$ref":"#/components/schemas/DispenserSlot"}},"required":["slot","enabled"],"type":"object"},"ErrorResult":{"description":"Error","properties":{"code":{"description":"Error code","example":-1,"type":"integer"},"message":{"description":"Error description","example":"Some error description","type":"string"}},"required":["code","message"],"type":"object"},"HardwareListResult":{"additionalProperties":{"type":"boolean"},"description":"Available hardware and its health","example":{"my-pos":true},"type":"object","x-go-type":"map[string]bool"},"HardwareRequest":{"properties":{"method":{"description":"Method name","example":"my-method","type":"string","x-oapi-codegen-extra-tags":{"validate":"required"}},"name":{"description":"Named hardware","example":"my-pos","type":"string","x-oapi-codegen-extra-tags":{"validate":"required"}},"params":{"description":"Method params","example":{"foo":"bar"},"type":"object","x-go-type":"json.RawMessage"}},"required":["name","method","params"],"type":"object"},"HardwareResult":{"properties":{"result":{"description":"Hardware method result","example":{"foo":"bar"},"type":"object","x-go-type":"json.RawMessage"}},"required":["result"],"type":"object"},"SafeboxData":{"description":"Describes a safebox storage. Has 9999 slots","properties":{"allocated":{"description":"Allocated storage slot addresses","items":{"$ref":"#/components/schemas/StorageAllocatedCell"},"type":"array"},"free":{"description":"Number of free slots","example":9000,"type":"integer"},"type":{"$ref":"#/components/schemas/StorageType"}},"required":["type","allocated","free"],"type":"object"},"ServiceArgs":{"description":"User defined args","example":"{\"foo\":\"bar\"}","type":"string"},"StatusResult":{"properties":{"bot_id":{"example":42,"format":"uint64","type":"integer"},"features":{"$ref":"#/components/schemas/StatusResultFeatures"},"online":{"description":"Online status","example":true,"type":"boolean"},"power":{"description":"Power line status","example":true,"type":"boolean"},"project_id":{"example":1,"format":"uint64","type":"integer"},"serial":{"description":"Machine serial number","example":"CB-001","type":"string"}},"required":["project_id","bot_id","serial","online","power","features"],"type":"object"},"StatusResultFeatures":{"description":"Describes the machine features","properties":{"has_dispenser":{"description":"Machine has coin/bar dispenser hardware (for shop business flow)","example":false,"type":"boolean"},"storage_can_extract":{"description":"Machine storage supports items extraction (for shop or pawnshop business flow)","example":true,"type":"boolean"}},"required":["storage_can_extract","has_dispenser"],"type":"object"},"StorageAllocatedCell":{"description":"Describes allocated storage cell","properties":{"cell":{"$ref":"#/components/schemas/StorageCell"},"user_tag":{"$ref":"#/components/schemas/StorageTag"}},"required":["cell","user_tag"],"type":"object"},"StorageCell":{"description":"Storage cell address","example":"A1","maxLength":4,"minLength":2,"type":"string","x-oapi-codegen-extra-tags":{"validate":"required,alphanum,min=2,max=4"}},"StorageData":{"description":"Describes specific storage","discriminator":{"mapping":{"cellgrid":"#/components/schemas/CellGridData","dispenser":"#/components/schemas/DispenserData","safebox":"#/components/schemas/SafeboxData"},"propertyName":"type"},"oneOf":[{"$ref":"#/components/schemas/SafeboxData"},{"$ref":"#/components/schemas/CellGridData"},{"$ref":"#/components/schemas/DispenserData"}]},"StorageTag":{"description":"Storage cell user tag","example":"{\"domain\":\"shop\"}","maxLength":4096,"type":"string","x-oapi-codegen-extra-tags":{"validate":"max=4096"}},"StorageType":{"enum":["safebox","cellgrid","dispenser"],"type":"string"},"StoragesResult":{"properties":{"storages":{"description":"List of storages available","items":{"$ref":"#/components/schemas/StorageData"},"type":"array"}},"required":["storages"],"type":"object"}}},"info":{"description":"This document describes Goldex Robot [JSON-RPC 2.0](https://www.jsonrpc.org/specification) API in terms of HTTP requests, so:\n* method names should be read without a slash, i.e. `POST /foo.bar\"` is `foo.bar` method;\n* request bodies are treated as [request object params](https://www.jsonrpc.org/specification#request_object);\n* default response corresponds to the [response object result](https://www.jsonrpc.org/specification#response_object);\n* numeric response code represents [error object code](https://www.jsonrpc.org/specification#error_object);\n\nIn addition to standard [JSON-RPC error codes](https://www.jsonrpc.org/specification#error_object), each method defines local 5xx codes that should be handled.","title":"Bot (collector UI API)","version":"1.1.2"},"openapi":"3.0.0","paths":{"/alarm.stop":{"post":{"operationId":"alarmStop","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Shut down alarm horn","tags":["hardware"]}},"/cellgrid.allocate":{"post":{"description":"This method marks a cell allocated without actual storage movements.\n\nOnly enabled cell can be allocated.","operationId":"cellgridAllocate","requestBody":{"$ref":"#/components/requestBodies/AllocateCellRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Allocate a cell","tags":["cellgrid"]}},"/cellgrid.disable":{"post":{"description":"A cell can be disabled for technical reason.\n\nOnly a free cell can be disabled.","operationId":"cellgridDisable","requestBody":{"$ref":"#/components/requestBodies/ManageCellRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Disable a cell","tags":["cellgrid"]}},"/cellgrid.enable":{"post":{"operationId":"cellgridEnable","requestBody":{"$ref":"#/components/requestBodies/ManageCellRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Enable a cell","tags":["cellgrid"]}},"/cellgrid.free":{"post":{"description":"This method marks a cell free without actual storage movements.","operationId":"cellgridFree","requestBody":{"$ref":"#/components/requestBodies/ManageCellRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Free a cell","tags":["cellgrid"]}},"/cellgrid.load_complete":{"post":{"description":"When staff has finished loading the item, this method should be called.\n\nPrepared container will be moved back into the storage. \n\nCell gets allocated.","operationId":"cellgridLoadComplete","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellGridLoadPrepareResult"}}},"description":"Result"}},"summary":"Loading, step 2 (push back)","tags":["cellgrid"]}},"/cellgrid.load_prepare":{"post":{"description":"Pull out next free container to the front of the storage box.","operationId":"cellgridLoadPrepare","requestBody":{"$ref":"#/components/requestBodies/CellGridLoadRequest"},"responses":{"507":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"Storage is out of space"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellGridLoadPrepareResult"}}},"description":"Result"}},"summary":"Loading, step 1 (pull out)","tags":["cellgrid"]}},"/cellgrid.unload_complete":{"post":{"description":"When staff has took out the item, this method should be called.\n\nExtracted container will be moved back into the storage.","operationId":"cellgridUnloadComplete","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Unloading, step 3 (push back)","tags":["cellgrid"]}},"/cellgrid.unload_drop":{"post":{"description":"Turn over the prepared cell container, so staff can take the stored item.","operationId":"cellgridUnloadDrop","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Unloading, step 2 (drop)","tags":["cellgrid"]}},"/cellgrid.unload_prepare":{"post":{"description":"Pull out a container specified by address to the front of the storage box.\n\nRequested cell becomes free.","operationId":"cellgridUnloadPrepare","requestBody":{"$ref":"#/components/requestBodies/ManageCellRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Unloading, step 1 (pull out)","tags":["cellgrid"]}},"/dispenser.disable":{"post":{"operationId":"dispenserDisable","requestBody":{"$ref":"#/components/requestBodies/DispenserManageSlotRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Disable a slot","tags":["dispenser"]}},"/dispenser.enable":{"post":{"operationId":"dispenserEnable","requestBody":{"$ref":"#/components/requestBodies/DispenserManageSlotRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Enable a slot","tags":["dispenser"]}},"/door.open":{"post":{"operationId":"doorOpen","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Release electro-mechanical door lock","tags":["hardware"]}},"/hardware.call":{"post":{"operationId":"optHardwareCall","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HardwareRequest"}}},"description":"Params"},"responses":{"504":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"Hardware is unavailable. Try again"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HardwareResult"}}},"description":"Result"}},"summary":"Call optional hardware method","tags":["business"]}},"/hardware.list":{"post":{"operationId":"optHardwareList","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HardwareListResult"}}},"description":"Result"}},"summary":"Get available optional hardware","tags":["business"]}},"/inlet.close":{"post":{"operationId":"inletClose","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"503":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"Window is obstructed. Try one more time."},"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Close inlet window","tags":["hardware"]}},"/outlet.close":{"post":{"operationId":"outletClose","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"503":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"Window is obstructed. Try one more time."},"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Close outlet window","tags":["hardware"]}},"/safebox.clear":{"post":{"operationId":"safeboxClear","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Clear all safebox slots","tags":["safebox"]}},"/service.args":{"post":{"description":"In order to show the UI a business have to send related request to the machine.\n\nThe request can contain a user defined data (string), this method will return it.","operationId":"serviceArgs","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceArgs"}}},"description":"Result"}},"summary":"UI arguments","tags":["service"]}},"/service.exit":{"post":{"description":"Close the UI and switch the machine to the operational mode (show customer UI)","operationId":"serviceExit","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Exit the UI","tags":["service"]}},"/service.frontal_photo":{"post":{"description":"Takes a photo from a frontal camera and returns Base64-encoded JPEG bytes","operationId":"serviceFrontalPhoto","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"504":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"Camera is unavailable. Try again"},"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CameraPhoto"}}},"description":"Result"}},"summary":"Frontal camera photo","tags":["service"]}},"/service.kill":{"post":{"description":"Сall this method in case of emergency to switch the machine to the out of service mode.\n\nThe machine will display a service page and the UI will be unloaded.","operationId":"serviceKill","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Out of service","tags":["service"]}},"/service.status":{"post":{"description":"Reports current online status and machine features","operationId":"serviceStatus","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusResult"}}},"description":"Result"}},"summary":"Machine status","tags":["service"]}},"/storages":{"post":{"description":"Reports storage types the machine has","operationId":"storages","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoragesResult"}}},"description":"Result"}},"summary":"Storages list","tags":["storage"]}},"/water.flush":{"post":{"operationId":"waterFlush","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Flush water before the machine transportation","tags":["hardware"]}},"/water.pump":{"post":{"operationId":"waterPump","requestBody":{"$ref":"#/components/requestBodies/EmptyRequest"},"responses":{"503":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResult"}}},"description":"No water in tank"},"default":{"$ref":"#/components/responses/EmptyResult"}},"summary":"Pump water after the machine transportation","tags":["hardware"]}}},"tags":[{"name":"service"},{"name":"hardware"},{"name":"storage"},{"name":"safebox"},{"name":"cellgrid"},{"name":"business"}]}